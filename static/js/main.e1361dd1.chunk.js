(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,t){e.exports=t(29)},20:function(e,a,t){},29:function(e,a,t){"use strict";t.r(a);var n,o=t(0),r=t.n(o),c=t(7),l=t.n(c),s=(t(20),t(8)),d=t(10),u=t(1),m=t(9),i=t.n(m);const p="https://peasy-gender-counter.fly.dev",g=Object({NODE_ENV:"production",PUBLIC_URL:"/peasy-gender-counter-fe",REACT_APP_ENV:"production",REACT_APP_BACKEND_URL:"https://peasy-gender-counter.fly.dev"}).REACT_APP_BACKEND_TOKEN,h=d.a.div(n||(n=Object(s.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"])));function b(e){let{columns:a,data:t,isSearch:n}=e;const{getTableProps:o,getTableBodyProps:c,headerGroups:l,rows:s,prepareRow:d,state:m,setGlobalFilter:i}=Object(u.useTable)({columns:a,data:t},u.useGlobalFilter);return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("input",{type:"text",placeholder:"Search...",value:m.globalFilter||"",onChange:e=>i(e.target.value)}),r.a.createElement("table",o(),r.a.createElement("thead",null,l.map(e=>r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map(e=>r.a.createElement("th",e.getHeaderProps(),e.render("Header")))))),r.a.createElement("tbody",c(),s.map((e,a)=>(d(e),r.a.createElement("tr",e.getRowProps(),e.cells.map(e=>r.a.createElement("td",e.getCellProps(),e.render("Cell")))))))))}var E=function(){const[e,a]=Object(o.useState)([]),[t,n]=Object(o.useState)([]),[c,l]=Object(o.useState)(null),[s,d]=Object(o.useState)(0);Object(o.useEffect)(()=>{u(c),m()},[c]);const u=e=>{let t="".concat(p,"/api/users");null!==e&&(t+="?search=".concat(e)),fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:g}}).then(e=>e.json()).then(e=>{const t=e.data.map(a=>({number:e.data.indexOf(a)+1,uuid:a.uuid,name:a.name,gender:a.gender,age:a.age,location:a.location}));a(t),d(e.meta.total)}).catch(e=>{console.log(e.message)})},m=()=>{fetch("".concat(p,"/api/daily-record"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:g}}).then(e=>e.json()).then(e=>{const a={uuid:e.data.uuid,date:i.a.utc(e.data.date).local().format("llll"),male_count:e.data.male_count,female_count:e.data.female_count,male_avg_age:e.data.male_avg_age,female_avg_age:e.data.female_avg_age};n([a])}).catch(e=>{console.log(e.message)})},E=r.a.useMemo(()=>[{Header:"Daily Record",columns:[{Header:"Date",accessor:"date"}]},{Header:"Male",columns:[{Header:"Count",accessor:"male_count"},{Header:"Avg Age",accessor:"male_avg_age"}]},{Header:"Female",columns:[{Header:"Count",accessor:"female_count"},{Header:"Avg Age",accessor:"female_avg_age"}]}],[]),_=r.a.useMemo(()=>[{Header:"No",accessor:"number"},{Header:"Name",accessor:"name"},{Header:"Age",accessor:"age"},{Header:"Gender",accessor:"gender"},{Header:"Location",accessor:"location"},{Header:"Action",accessor:"delete",Cell:e=>{let{row:a}=e;return r.a.createElement("button",{onClick:()=>f(a.original.uuid)},"Delete")}}],[]);const f=e=>{console.log(e),fetch("".concat(p,"/api/users/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:g}}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");console.log("User deleted successfully"),u(null),m()}).catch(e=>{console.error("There was a problem with the fetch operation:",e)})};return r.a.createElement(h,null,r.a.createElement(b,{columns:E,data:t}),r.a.createElement(function(e){let{totalUsers:a}=e;return r.a.createElement("div",null,r.a.createElement("p",null,"Total Users: ",a))},{totalUsers:s}),r.a.createElement(b,{columns:_,data:e,isSearch:!0}))};l.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e1361dd1.chunk.js.map