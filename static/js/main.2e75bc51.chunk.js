(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,a,t){e.exports=t(28)},19:function(e,a,t){},28:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),r=t(7),l=t.n(r),c=(t(19),t(9)),s=t(1),d=t(8),u=t.n(d);const m="https://gender-counter.fly.dev",i="MDBkZDU5ZWYtYzkzZC00NmYwLTg1MWItYjY4YWFlMmJiOTli",p=c.a.div.withConfig({displayName:"App__Styles",componentId:"sc-1r1t5ph-0"})(["padding:1rem;table{border-spacing:0;border:1px solid black;tr{:last-child{td{border-bottom:0;}}}th,td{margin:0;padding:0.5rem;border-bottom:1px solid black;border-right:1px solid black;:last-child{border-right:0;}}}"]);function g(e){let{columns:a,data:t,isSearch:o}=e;const{getTableProps:r,getTableBodyProps:l,headerGroups:c,rows:d,prepareRow:u,state:m,setGlobalFilter:i}=Object(s.useTable)({columns:a,data:t},s.useGlobalFilter);return n.a.createElement(n.a.Fragment,null,o&&n.a.createElement("input",{type:"text",placeholder:"Search...",value:m.globalFilter||"",onChange:e=>i(e.target.value)}),n.a.createElement("table",r(),n.a.createElement("thead",null,c.map(e=>n.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map(e=>n.a.createElement("th",e.getHeaderProps(),e.render("Header")))))),n.a.createElement("tbody",l(),d.map((e,a)=>(u(e),n.a.createElement("tr",e.getRowProps(),e.cells.map(e=>n.a.createElement("td",e.getCellProps(),e.render("Cell")))))))))}var h=function(){const[e,a]=Object(o.useState)([]),[t,r]=Object(o.useState)([]),[l,c]=Object(o.useState)(null),[s,d]=Object(o.useState)(0);Object(o.useEffect)(()=>{h(l),b()},[l]);const h=e=>{let t="".concat(m,"/api/users");null!==e&&(t+="?search=".concat(e)),fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:i}}).then(e=>e.json()).then(e=>{const t=e.data.map(a=>({number:e.data.indexOf(a)+1,uuid:a.uuid,name:a.name,gender:a.gender,age:a.age,location:a.location}));a(t),d(e.meta.total)}).catch(e=>{console.log(e.message)})},b=()=>{fetch("".concat(m,"/api/daily-record"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:i}}).then(e=>e.json()).then(e=>{const a=e.data.map(e=>({uuid:e.uuid,date:u()(e.date).format("llll"),male_count:e.male_count,female_count:e.female_count,male_avg_age:e.male_avg_age,female_avg_age:e.female_avg_age,total_count:e.male_count+e.female_count}));r(a)}).catch(e=>{console.log(e.message)})},f=n.a.useMemo(()=>[{Header:"Daily Record",columns:[{Header:"Date",accessor:"date"}]},{Header:"Male",columns:[{Header:"Count",accessor:"male_count"},{Header:"Avg Age",accessor:"male_avg_age"}]},{Header:"Female",columns:[{Header:"Count",accessor:"female_count"},{Header:"Avg Age",accessor:"female_avg_age"}]},{Header:"Total Count",columns:[{Header:"Count",accessor:"total_count"}]}],[]),E=n.a.useMemo(()=>[{Header:"No",accessor:"number"},{Header:"Name",accessor:"name"},{Header:"Age",accessor:"age"},{Header:"Gender",accessor:"gender"},{Header:"Location",accessor:"location"},{Header:"Action",accessor:"delete",Cell:e=>{let{row:a}=e;return n.a.createElement("button",{onClick:()=>_(a.original.uuid)},"Delete")}}],[]);const _=e=>{console.log(e),fetch("".concat(m,"/api/users/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:i}}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");console.log("User deleted successfully"),h(null),b()}).catch(e=>{console.error("There was a problem with the fetch operation:",e)})};return n.a.createElement(p,null,n.a.createElement(g,{columns:f,data:t}),n.a.createElement(function(e){let{totalUsers:a}=e;return n.a.createElement("div",null,n.a.createElement("p",null,"Total Users: ",a))},{totalUsers:s}),n.a.createElement(g,{columns:E,data:e,isSearch:!0}))};l.a.render(n.a.createElement(h,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2e75bc51.chunk.js.map